!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("ImageUploader",[],e):"object"==typeof exports?exports.ImageUploader=e():t.ImageUploader=e()}(window,function(){return function(t){var e={};function n(i){if(e[i])return e[i].exports;var o=e[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(i,o,function(e){return t[e]}.bind(null,o));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=4)}([function(t,e,n){!function(){"use strict";Date.now||(Date.now=function(){return(new Date).getTime()});for(var t=["webkit","moz"],e=0;e<t.length&&!window.requestAnimationFrame;++e){var n=t[e];window.requestAnimationFrame=window[n+"RequestAnimationFrame"],window.cancelAnimationFrame=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"]}if(/iP(ad|hone|od).*OS 6/.test(window.navigator.userAgent)||!window.requestAnimationFrame||!window.cancelAnimationFrame){var i=0;window.requestAnimationFrame=function(t){var e=Date.now(),n=Math.max(i+16,e);return setTimeout(function(){t(i=n)},n-e)},window.cancelAnimationFrame=clearTimeout}}(),function(){function e(t,e,n){t.addEventListener(e,n,!1)}function n(t){return Math.sqrt(1-Math.pow(t-1,2))}function i(t){return 1-Math.sqrt(1-t*t)}var o=function(t){this.element="string"==typeof t.touch?document.querySelector(t.touch):t.touch,this.target=this._getValue(t.target,this.element),this.vertical=this._getValue(t.vertical,!0),this.property=t.property,this.tickID=0,this.initialValue=this._getValue(t.initialValue,this.target[this.property]),this.target[this.property]=this.initialValue,this.fixed=this._getValue(t.fixed,!1),this.sensitivity=this._getValue(t.sensitivity,1),this.moveFactor=this._getValue(t.moveFactor,1),this.factor=this._getValue(t.factor,1),this.outFactor=this._getValue(t.outFactor,.3),this.min=t.min,this.max=t.max,this.deceleration=6e-4,this.maxRegion=this._getValue(t.maxRegion,600),this.springMaxRegion=this._getValue(t.springMaxRegion,60),this.maxSpeed=t.maxSpeed,this.hasMaxSpeed=!(void 0===this.maxSpeed),this.lockDirection=this._getValue(t.lockDirection,!0);var n=function(){};if(this.change=t.change||n,this.touchEnd=t.touchEnd||n,this.touchStart=t.touchStart||n,this.touchMove=t.touchMove||n,this.touchCancel=t.touchCancel||n,this.reboundEnd=t.reboundEnd||n,this.animationEnd=t.animationEnd||n,this.correctionEnd=t.correctionEnd||n,this.tap=t.tap||n,this.pressMove=t.pressMove||n,this.preventDefault=this._getValue(t.preventDefault,!0),this.preventDefaultException={tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},this.hasMin=!(void 0===this.min),this.hasMax=!(void 0===this.max),this.hasMin&&this.hasMax&&this.min>this.max)throw"the min value can't be greater than the max value.";this.isTouchStart=!1,this.step=t.step,this.inertia=this._getValue(t.inertia,!0),this._calculateIndex(),this.eventTarget=window,t.bindSelf&&(this.eventTarget=this.element),this._moveHandler=this._move.bind(this),e(this.element,"touchstart",this._start.bind(this)),e(this.eventTarget,"touchend",this._end.bind(this)),e(this.eventTarget,"touchcancel",this._cancel.bind(this)),this.eventTarget.addEventListener("touchmove",this._moveHandler,{passive:!1,capture:!1}),this.x1=this.x2=this.y1=this.y2=null};o.prototype={_getValue:function(t,e){return void 0===t?e:t},stop:function(){cancelAnimationFrame(this.tickID),this._calculateIndex()},_start:function(t){this.isTouchStart=!0,this.touchStart.call(this,t,this.target[this.property]),cancelAnimationFrame(this.tickID),this._calculateIndex(),this.startTime=(new Date).getTime(),this.x1=this.preX=t.touches[0].pageX,this.y1=this.preY=t.touches[0].pageY,this.start=this.vertical?this.preY:this.preX,this._firstTouchMove=!0,this._preventMove=!1},_move:function(t){if(this.isTouchStart){var e=t.touches.length,n=t.touches[0].pageX,i=t.touches[0].pageY;if(this._firstTouchMove&&this.lockDirection){var o=Math.abs(n-this.x1)-Math.abs(i-this.y1);o>0&&this.vertical?this._preventMove=!0:o<0&&!this.vertical&&(this._preventMove=!0),this._firstTouchMove=!1}if(!this._preventMove){var r=(this.vertical?i-this.preY:n-this.preX)*this.sensitivity,s=this.moveFactor;this.hasMax&&this.target[this.property]>this.max&&r>0?s=this.outFactor:this.hasMin&&this.target[this.property]<this.min&&r<0&&(s=this.outFactor),r*=s,this.preX=n,this.preY=i,this.fixed||(this.target[this.property]+=r),this.change.call(this,this.target[this.property]);var a=(new Date).getTime();a-this.startTime>300&&(this.startTime=a,this.start=this.vertical?this.preY:this.preX),this.touchMove.call(this,t,this.target[this.property])}this.preventDefault&&!function(t,e){for(var n in e)if(e[n].test(t[n]))return!0;return!1}(t.target,this.preventDefaultException)&&t.preventDefault(),1===e&&(null!==this.x2?(t.deltaX=n-this.x2,t.deltaY=i-this.y2):(t.deltaX=0,t.deltaY=0),this.pressMove.call(this,t,this.target[this.property])),this.x2=n,this.y2=i}},_cancel:function(t){var e=this.target[this.property];this.touchCancel.call(this,t,e),this._end(t)},to:function(t,e,i){this._to(t,this._getValue(e,600),i||n,this.change,function(t){this._calculateIndex(),this.reboundEnd.call(this,t),this.animationEnd.call(this,t)}.bind(this))},_calculateIndex:function(){this.hasMax&&this.hasMin&&(this.currentPage=Math.round((this.max-this.target[this.property])/this.step))},_end:function(t){if(this.isTouchStart){this.isTouchStart=!1;var e=this,o=this.target[this.property],r=Math.abs(t.changedTouches[0].pageX-this.x1)<30&&Math.abs(t.changedTouches[0].pageY-this.y1)<30;if(r&&this.tap.call(this,t,o),!1===this.touchEnd.call(this,t,o,this.currentPage))return;if(this.hasMax&&o>this.max)this._to(this.max,200,n,this.change,function(t){this.reboundEnd.call(this,t),this.animationEnd.call(this,t)}.bind(this));else if(this.hasMin&&o<this.min)this._to(this.min,200,n,this.change,function(t){this.reboundEnd.call(this,t),this.animationEnd.call(this,t)}.bind(this));else if(!this.inertia||r||this._preventMove)e._correction();else{var s=(new Date).getTime()-this.startTime;if(s<300){var a=((this.vertical?t.changedTouches[0].pageY:t.changedTouches[0].pageX)-this.start)*this.sensitivity,c=Math.abs(a)/s,h=this.factor*c;this.hasMaxSpeed&&h>this.maxSpeed&&(h=this.maxSpeed);var l=o+h*h/(2*this.deceleration)*(a<0?-1:1),u=1;l<this.min?l<this.min-this.maxRegion?(u=i((o-this.min+this.springMaxRegion)/(o-l)),l=this.min-this.springMaxRegion):(u=i((o-this.min+this.springMaxRegion*(this.min-l)/this.maxRegion)/(o-l)),l=this.min-this.springMaxRegion*(this.min-l)/this.maxRegion):l>this.max&&(l>this.max+this.maxRegion?(u=i((this.max+this.springMaxRegion-o)/(l-o)),l=this.max+this.springMaxRegion):(u=i((this.max+this.springMaxRegion*(l-this.max)/this.maxRegion-o)/(l-o)),l=this.max+this.springMaxRegion*(l-this.max)/this.maxRegion));var p=Math.round(c/e.deceleration)*u;e._to(Math.round(l),p,n,e.change,function(t){e.hasMax&&e.target[e.property]>e.max?(cancelAnimationFrame(e.tickID),e._to(e.max,600,n,e.change,e.animationEnd)):e.hasMin&&e.target[e.property]<e.min?(cancelAnimationFrame(e.tickID),e._to(e.min,600,n,e.change,e.animationEnd)):e.step?e._correction():e.animationEnd.call(e,t),e.change.call(this,t)})}else e._correction()}}this.x1=this.x2=this.y1=this.y2=null},_to:function(t,e,n,i,o){if(!this.fixed){var r=this.target,s=this.property,a=r[s],c=t-a,h=new Date,l=this,u=function(){var p=new Date-h;if(p>=e)return r[s]=t,i&&i.call(l,t),void(o&&o.call(l,t));r[s]=c*n(p/e)+a,l.tickID=requestAnimationFrame(u),i&&i.call(l,r[s])};u()}},_correction:function(){if(void 0!==this.step){var t=this.target[this.property],e=Math.floor(Math.abs(t/this.step)),i=t%this.step;Math.abs(i)>this.step/2?this._to((t<0?-1:1)*(e+1)*this.step,400,n,this.change,function(t){this._calculateIndex(),this.correctionEnd.call(this,t),this.animationEnd.call(this,t)}.bind(this)):this._to((t<0?-1:1)*e*this.step,400,n,this.change,function(t){this._calculateIndex(),this.correctionEnd.call(this,t),this.animationEnd.call(this,t)}.bind(this))}}},t.exports=o}()},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);n(1);var i=document.createElement("div").style;!function(){var t={webkit:"webkitTransform",Moz:"MozTransform",O:"OTransform",ms:"msTransform",standard:"transform"};for(var e in t)if(void 0!==i[t[e]])return e}();!function(){for(var t=navigator.userAgent,e=["Android","iPhone","SymbianOS","Windows Phone","iPad","iPod"],n=!0,i=0;i<e.length;i++)if(t.indexOf(e[i])>0){n=!1;break}}();var o=function(){},r={},s=[],a=[];function c(t,e){var n,i,c,h,l=a;for(h=arguments.length;h-- >2;)s.push(arguments[h]);for(e&&null!=e.children&&(s.length||s.push(e.children),delete e.children);s.length;)if((i=s.pop())&&void 0!==i.pop)for(h=i.length;h--;)s.push(i[h]);else"boolean"==typeof i&&(i=null),(c="function"!=typeof t)&&(null==i?i="":"number"==typeof i?i=String(i):"string"!=typeof i&&(c=!1)),c&&n?l[l.length-1]+=i:l===a?l=[i]:l.push(i),n=c;var u=new o;return u.nodeName=t,u.children=l,u.attributes=null==e?void 0:e,u.key=null==e?void 0:e.key,void 0!==r.vnode&&r.vnode(u),u}function h(t,e){for(var n in e)t[n]=e[n];return t}function l(t,e){null!=t&&("function"==typeof t?t(e):t.current=e)}var u="function"==typeof Promise?Promise.resolve().then.bind(Promise.resolve()):setTimeout;var p=/acit|ex(?:s|g|n|p|$)|rph|ows|mnc|ntw|ine[ch]|zoo|^ord/i,f=[];function d(t){!t._dirty&&(t._dirty=!0)&&1==f.push(t)&&(r.debounceRendering||u)(m)}function m(){for(var t;t=f.pop();)t._dirty&&j(t)}function v(t,e){return t.normalizedNodeName===e||t.nodeName.toLowerCase()===e.toLowerCase()}function g(t){var e=h({},t.attributes);e.children=t.children;var n=t.nodeName.defaultProps;if(void 0!==n)for(var i in n)void 0===e[i]&&(e[i]=n[i]);return e}function y(t){var e=t.parentNode;e&&e.removeChild(t)}function _(t,e,n,i,o){if("className"===e&&(e="class"),"key"===e);else if("ref"===e)l(n,null),l(i,t);else if("class"!==e||o)if("style"===e){if(i&&"string"!=typeof i&&"string"!=typeof n||(t.style.cssText=i||""),i&&"object"==typeof i){if("string"!=typeof n)for(var r in n)r in i||(t.style[r]="");for(var r in i)t.style[r]="number"==typeof i[r]&&!1===p.test(r)?i[r]+"px":i[r]}}else if("dangerouslySetInnerHTML"===e)i&&(t.innerHTML=i.__html||"");else if("o"==e[0]&&"n"==e[1]){var s=e!==(e=e.replace(/Capture$/,""));e=e.toLowerCase().substring(2),i?n||t.addEventListener(e,b,s):t.removeEventListener(e,b,s),(t._listeners||(t._listeners={}))[e]=i}else if("list"!==e&&"type"!==e&&!o&&e in t){try{t[e]=null==i?"":i}catch(t){}null!=i&&!1!==i||"spellcheck"==e||t.removeAttribute(e)}else{var a=o&&e!==(e=e.replace(/^xlink:?/,""));null==i||!1===i?a?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.removeAttribute(e):"function"!=typeof i&&(a?t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),i):t.setAttribute(e,i))}else t.className=i||""}function b(t){return this._listeners[t.type](r.event&&r.event(t)||t)}var x=[],w=0,M=!1,k=!1;function T(){for(var t;t=x.shift();)r.afterMount&&r.afterMount(t),t.componentDidMount&&t.componentDidMount()}function S(t,e,n,i,o,r){w++||(M=null!=o&&void 0!==o.ownerSVGElement,k=null!=t&&!("__preactattr_"in t));var s=C(t,e,n,i,r);return o&&s.parentNode!==o&&o.appendChild(s),--w||(k=!1,r||T()),s}function C(t,e,n,i,o){var r=t,s=M;if(null!=e&&"boolean"!=typeof e||(e=""),"string"==typeof e||"number"==typeof e)return t&&void 0!==t.splitText&&t.parentNode&&(!t._component||o)?t.nodeValue!=e&&(t.nodeValue=e):(r=document.createTextNode(e),t&&(t.parentNode&&t.parentNode.replaceChild(r,t),N(t,!0))),r.__preactattr_=!0,r;var a,c,h=e.nodeName;if("function"==typeof h)return function(t,e,n,i){var o=t&&t._component,r=o,s=t,a=o&&t._componentConstructor===e.nodeName,c=a,h=g(e);for(;o&&!c&&(o=o._parentComponent);)c=o.constructor===e.nodeName;o&&c&&(!i||o._component)?(X(o,h,3,n,i),t=o.base):(r&&!a&&(D(r),t=s=null),o=P(e.nodeName,h,n),t&&!o.nextBase&&(o.nextBase=t,s=null),X(o,h,1,n,i),t=o.base,s&&t!==s&&(s._component=null,N(s,!1)));return t}(t,e,n,i);if(M="svg"===h||"foreignObject"!==h&&M,h=String(h),(!t||!v(t,h))&&(a=h,(c=M?document.createElementNS("http://www.w3.org/2000/svg",a):document.createElement(a)).normalizedNodeName=a,r=c,t)){for(;t.firstChild;)r.appendChild(t.firstChild);t.parentNode&&t.parentNode.replaceChild(r,t),N(t,!0)}var l=r.firstChild,u=r.__preactattr_,p=e.children;if(null==u){u=r.__preactattr_={};for(var f=r.attributes,d=f.length;d--;)u[f[d].name]=f[d].value}return!k&&p&&1===p.length&&"string"==typeof p[0]&&null!=l&&void 0!==l.splitText&&null==l.nextSibling?l.nodeValue!=p[0]&&(l.nodeValue=p[0]):(p&&p.length||null!=l)&&function(t,e,n,i,o){var r,s,a,c,h,l=t.childNodes,u=[],p={},f=0,d=0,m=l.length,g=0,_=e?e.length:0;if(0!==m)for(var b=0;b<m;b++){var x=l[b],w=x.__preactattr_,M=_&&w?x._component?x._component.__key:w.key:null;null!=M?(f++,p[M]=x):(w||(void 0!==x.splitText?!o||x.nodeValue.trim():o))&&(u[g++]=x)}if(0!==_)for(var b=0;b<_;b++){c=e[b],h=null;var M=c.key;if(null!=M)f&&void 0!==p[M]&&(h=p[M],p[M]=void 0,f--);else if(d<g)for(r=d;r<g;r++)if(void 0!==u[r]&&(k=s=u[r],S=o,"string"==typeof(T=c)||"number"==typeof T?void 0!==k.splitText:"string"==typeof T.nodeName?!k._componentConstructor&&v(k,T.nodeName):S||k._componentConstructor===T.nodeName)){h=s,u[r]=void 0,r===g-1&&g--,r===d&&d++;break}h=C(h,c,n,i),a=l[b],h&&h!==t&&h!==a&&(null==a?t.appendChild(h):h===a.nextSibling?y(a):t.insertBefore(h,a))}var k,T,S;if(f)for(var b in p)void 0!==p[b]&&N(p[b],!1);for(;d<=g;)void 0!==(h=u[g--])&&N(h,!1)}(r,p,n,i,k||null!=u.dangerouslySetInnerHTML),function(t,e,n){var i;for(i in n)e&&null!=e[i]||null==n[i]||_(t,i,n[i],n[i]=void 0,M);for(i in e)"children"===i||"innerHTML"===i||i in n&&e[i]===("value"===i||"checked"===i?t[i]:n[i])||_(t,i,n[i],n[i]=e[i],M)}(r,e.attributes,u),M=s,r}function N(t,e){var n=t._component;n?D(n):(null!=t.__preactattr_&&l(t.__preactattr_.ref,null),!1!==e&&null!=t.__preactattr_||y(t),O(t))}function O(t){for(t=t.lastChild;t;){var e=t.previousSibling;N(t,!0),t=e}}var E=[];function P(t,e,n){var i,o=E.length;for(t.prototype&&t.prototype.render?(i=new t(e,n),I.call(i,e,n)):((i=new I(e,n)).constructor=t,i.render=Y);o--;)if(E[o].constructor===t)return i.nextBase=E[o].nextBase,E.splice(o,1),i;return i}function Y(t,e,n){return this.constructor(t,n)}function X(t,e,n,i,o){t._disable||(t._disable=!0,t.__ref=e.ref,t.__key=e.key,delete e.ref,delete e.key,void 0===t.constructor.getDerivedStateFromProps&&(!t.base||o?t.componentWillMount&&t.componentWillMount():t.componentWillReceiveProps&&t.componentWillReceiveProps(e,i)),i&&i!==t.context&&(t.prevContext||(t.prevContext=t.context),t.context=i),t.prevProps||(t.prevProps=t.props),t.props=e,t._disable=!1,0!==n&&(1!==n&&!1===r.syncComponentUpdates&&t.base?d(t):j(t,1,o)),l(t.__ref,t))}function j(t,e,n,i){if(!t._disable){var o,s,a,c=t.props,l=t.state,u=t.context,p=t.prevProps||c,f=t.prevState||l,d=t.prevContext||u,m=t.base,v=t.nextBase,y=m||v,_=t._component,b=!1,M=d;if(t.constructor.getDerivedStateFromProps&&(l=h(h({},l),t.constructor.getDerivedStateFromProps(c,l)),t.state=l),m&&(t.props=p,t.state=f,t.context=d,2!==e&&t.shouldComponentUpdate&&!1===t.shouldComponentUpdate(c,l,u)?b=!0:t.componentWillUpdate&&t.componentWillUpdate(c,l,u),t.props=c,t.state=l,t.context=u),t.prevProps=t.prevState=t.prevContext=t.nextBase=null,t._dirty=!1,!b){o=t.render(c,l,u),t.getChildContext&&(u=h(h({},u),t.getChildContext())),m&&t.getSnapshotBeforeUpdate&&(M=t.getSnapshotBeforeUpdate(p,f));var k,C,O=o&&o.nodeName;if("function"==typeof O){var E=g(o);(s=_)&&s.constructor===O&&E.key==s.__key?X(s,E,1,u,!1):(k=s,t._component=s=P(O,E,u),s.nextBase=s.nextBase||v,s._parentComponent=t,X(s,E,0,u,!1),j(s,1,n,!0)),C=s.base}else a=y,(k=_)&&(a=t._component=null),(y||1===e)&&(a&&(a._component=null),C=S(a,o,u,n||!m,y&&y.parentNode,!0));if(y&&C!==y&&s!==_){var Y=y.parentNode;Y&&C!==Y&&(Y.replaceChild(C,y),k||(y._component=null,N(y,!1)))}if(k&&D(k),t.base=C,C&&!i){for(var I=t,A=t;A=A._parentComponent;)(I=A).base=C;C._component=I,C._componentConstructor=I.constructor}}for(!m||n?x.push(t):b||(t.componentDidUpdate&&t.componentDidUpdate(p,f,M),r.afterUpdate&&r.afterUpdate(t));t._renderCallbacks.length;)t._renderCallbacks.pop().call(t);w||i||T()}}function D(t){r.beforeUnmount&&r.beforeUnmount(t);var e=t.base;t._disable=!0,t.componentWillUnmount&&t.componentWillUnmount(),t.base=null;var n=t._component;n?D(n):e&&(null!=e.__preactattr_&&l(e.__preactattr_.ref,null),t.nextBase=e,y(e),E.push(t),O(e)),l(t.__ref,null)}function I(t,e){this._dirty=!0,this.context=e,this.props=t,this.state=this.state||{},this._renderCallbacks=[]}function A(t,e,n){return S(n,t,{},!1,e,!1)}h(I.prototype,{setState:function(t,e){this.prevState||(this.prevState=this.state),this.state=h(h({},this.state),"function"==typeof t?t(this.state,this.props):t),e&&this._renderCallbacks.push(e),d(this)},forceUpdate:function(t){t&&this._renderCallbacks.push(t),j(this,2)},render:function(){}});var R={h:c,createElement:c,cloneElement:function(t,e){return c(t.nodeName,h(h({},t.attributes),e),arguments.length>2?[].slice.call(arguments,2):t.children)},createRef:function(){return{}},Component:I,render:A,rerender:m,options:r},F=(n(2),function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}());var L=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.state={show:!1},n.show=n.show.bind(n),n.hide=n.hide.bind(n),n.close=n.close.bind(n),n.cancel=n.cancel.bind(n),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,I),F(e,[{key:"show",value:function(){this.setState({show:!0})}},{key:"hide",value:function(){this.setState({show:!1}),this.props.onHide&&this.props.onHide()}},{key:"close",value:function(){var t=this;this.hide(),setTimeout(function(){var e=t.base;e&&(A(null,e.parentNode,e),e.remove())},320)}},{key:"cancel",value:function(){this.close(),this.props.onCancel&&this.props.onCancel()}},{key:"stopMove",value:function(t){this.props.stop&&t.preventDefault()}},{key:"render",value:function(){return R.h("div",{className:"action "+this.props.className,onTouchMove:this.stopMove.bind(this)},R.h("div",{className:this.state.show?"action action__show":"action"},R.h("div",{className:"action-model mask",onClick:this.cancel}),R.h("div",{className:"action-"+(this.props.position||"center")},this.props.children)))}}]),e}(),V=n(0),U=n.n(V),Z=.017453292519943295,B=function(t,e,n,i,o,r,s,a,c,h,l,u,p,f,d,m){this.elements=window.Float32Array?new Float32Array(16):[];var v=this.elements;v[0]=void 0!==t?t:1,v[4]=e||0,v[8]=n||0,v[12]=i||0,v[1]=o||0,v[5]=void 0!==r?r:1,v[9]=s||0,v[13]=a||0,v[2]=c||0,v[6]=h||0,v[10]=void 0!==l?l:1,v[14]=u||0,v[3]=p||0,v[7]=f||0,v[11]=d||0,v[15]=void 0!==m?m:1};B.prototype={set:function(t,e,n,i,o,r,s,a,c,h,l,u,p,f,d,m){var v=this.elements;return v[0]=t,v[4]=e,v[8]=n,v[12]=i,v[1]=o,v[5]=r,v[9]=s,v[13]=a,v[2]=c,v[6]=h,v[10]=l,v[14]=u,v[3]=p,v[7]=f,v[11]=d,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},multiplyMatrices:function(t,e){var n=t.elements,i=this.elements,o=n[0],r=n[4],s=n[8],a=n[12],c=n[1],h=n[5],l=n[9],u=n[13],p=n[2],f=n[6],d=n[10],m=n[14],v=n[3],g=n[7],y=n[11],_=n[15],b=e[0],x=e[1],w=e[2],M=e[3],k=e[4],T=e[5],S=e[6],C=e[7],N=e[8],O=e[9],E=e[10],P=e[11],Y=e[12],X=e[13],j=e[14],D=e[15];return i[0]=o*b+r*k+s*N+a*Y,i[4]=o*x+r*T+s*O+a*X,i[8]=o*w+r*S+s*E+a*j,i[12]=o*M+r*C+s*P+a*D,i[1]=c*b+h*k+l*N+u*Y,i[5]=c*x+h*T+l*O+u*X,i[9]=c*w+h*S+l*E+u*j,i[13]=c*M+h*C+l*P+u*D,i[2]=p*b+f*k+d*N+m*Y,i[6]=p*x+f*T+d*O+m*X,i[10]=p*w+f*S+d*E+m*j,i[14]=p*M+f*C+d*P+m*D,i[3]=v*b+g*k+y*N+_*Y,i[7]=v*x+g*T+y*O+_*X,i[11]=v*w+g*S+y*E+_*j,i[15]=v*M+g*C+y*P+_*D,this},_rounded:function(t,e){return e=Math.pow(10,e||15),Math.round(t*e)/e},_arrayWrap:function(t){return window.Float32Array?new Float32Array(t):t},appendTransform:function(t,e,n,i,o,r,s,a,c,h,l,u,p,f){var d=s*Z,m=this._rounded(Math.cos(d)),v=this._rounded(Math.sin(d)),g=a*Z,y=this._rounded(Math.cos(g)),_=this._rounded(Math.sin(g)),b=c*Z,x=this._rounded(Math.cos(-1*b)),w=this._rounded(Math.sin(-1*b));return this.multiplyMatrices(this,this._arrayWrap([1,0,0,t,0,m,v,e,0,-v,m,n,0,0,0,1])),this.multiplyMatrices(this,this._arrayWrap([y,0,_,0,0,1,0,0,-_,0,y,0,0,0,0,1])),this.multiplyMatrices(this,this._arrayWrap([x*i,w*o,0,0,-w*i,x*o,0,0,0,0,1*r,0,0,0,0,1])),(h||l)&&this.multiplyMatrices(this,this._arrayWrap([this._rounded(Math.cos(h*Z)),this._rounded(Math.sin(h*Z)),0,0,-1*this._rounded(Math.sin(l*Z)),this._rounded(Math.cos(l*Z)),0,0,0,0,1,0,0,0,0,1])),(u||p||f)&&(this.elements[12]-=u*this.elements[0]+p*this.elements[4]+f*this.elements[8],this.elements[13]-=u*this.elements[1]+p*this.elements[5]+f*this.elements[9],this.elements[14]-=u*this.elements[2]+p*this.elements[6]+f*this.elements[10]),this}};var W=function(t,e,n,i,o,r){return this.a=null==t?1:t,this.b=e||0,this.c=n||0,this.d=null==i?1:i,this.tx=o||0,this.ty=r||0,this};function H(t,e,n){Object.defineProperty(t,e,{get:function(){return this["_"+e]},set:function(t){this["_"+e]=t,n()}})}function z(t,e){if(!t.___mixCSS3Transform){var n,i=["translateX","translateY","translateZ","scaleX","scaleY","scaleZ","rotateX","rotateY","rotateZ","skewX","skewY","originX","originY","originZ"],o=(n=t,"object"==typeof HTMLElement?n instanceof HTMLElement:n&&"object"==typeof n&&null!==n&&1===n.nodeType&&"string"==typeof n.nodeName);e||i.push("perspective"),t.___mixCSS3Transform=!0,function(t,e,n){for(var i=0,o=e.length;i<o;i++)H(t,e[i],n)}(t,i,function(){var n=t.matrix3d.identity().appendTransform(t.translateX,t.translateY,t.translateZ,t.scaleX,t.scaleY,t.scaleZ,t.rotateX,t.rotateY,t.rotateZ,t.skewX,t.skewY,t.originX,t.originY,t.originZ),i=(e?"":"perspective("+t.perspective+"px) ")+"matrix3d("+Array.prototype.slice.call(n.elements).join(",")+")";o?t.style.transform=t.style.msTransform=t.style.OTransform=t.style.MozTransform=t.style.webkitTransform=i:t.transform=i}),t.matrix3d=new B,e||(t.perspective=500),t.scaleX=t.scaleY=t.scaleZ=1,t.translateX=t.translateY=t.translateZ=t.rotateX=t.rotateY=t.rotateZ=t.skewX=t.skewY=t.originX=t.originY=t.originZ=0}}W.prototype={identity:function(){return this.a=this.d=1,this.b=this.c=this.tx=this.ty=0,this},appendTransform:function(t,e,n,i,o,r,s,a,c){if(o%360)var h=o*Z,l=Math.cos(h),u=Math.sin(h);else l=1,u=0;return r||s?(r*=Z,s*=Z,this.append(Math.cos(s),Math.sin(s),-Math.sin(r),Math.cos(r),t,e),this.append(l*n,u*n,-u*i,l*i,0,0)):this.append(l*n,u*n,-u*i,l*i,t,e),(a||c)&&(this.tx-=a*this.a+c*this.c,this.ty-=a*this.b+c*this.d),this},append:function(t,e,n,i,o,r){var s=this.a,a=this.b,c=this.c,h=this.d;return this.a=t*s+e*c,this.b=t*a+e*h,this.c=n*s+i*c,this.d=n*a+i*h,this.tx=o*s+r*c+this.tx,this.ty=o*a+r*h+this.ty,this},initialize:function(t,e,n,i,o,r){return this.a=t,this.b=e,this.c=n,this.d=i,this.tx=o,this.ty=r,this},setValues:function(t,e,n,i,o,r){return this.a=null==t?1:t,this.b=e||0,this.c=n||0,this.d=null==i?1:i,this.tx=o||0,this.ty=r||0,this},copy:function(t){return this.setValues(t.a,t.b,t.c,t.d,t.tx,t.ty)}},z.getMatrix3D=function(t){var e={translateX:0,translateY:0,translateZ:0,rotateX:0,rotateY:0,rotateZ:0,skewX:0,skewY:0,originX:0,originY:0,originZ:0,scaleX:1,scaleY:1,scaleZ:1};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return(new B).identity().appendTransform(e.translateX,e.translateY,e.translateZ,e.scaleX,e.scaleY,e.scaleZ,e.rotateX,e.rotateY,e.rotateZ,e.skewX,e.skewY,e.originX,e.originY,e.originZ).elements},z.getMatrix2D=function(t){var e={translateX:0,translateY:0,rotation:0,skewX:0,skewY:0,originX:0,originY:0,scaleX:1,scaleY:1};for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return(new W).identity().appendTransform(e.translateX,e.translateY,e.scaleX,e.scaleY,e.rotation,e.skewX,e.skewY,e.originX,e.originY)};var q=z,$=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();var J=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.refresh=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20;n.alloyTouch&&setTimeout(function(){var t=n.base,e=n.base.children[0];n.alloyTouch.min=t.clientHeight-e.clientHeight},t)},n.state={offsetY:0},n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,I),$(e,[{key:"getStyle",value:function(){return"transform: translate3d(0,"+this.state.offsetY+"px, 0);min-height:100%;"}},{key:"componentDidMount",value:function(){var t=this;setTimeout(function(){var e=t.base,n=t.base.children[0],i=e.clientHeight-n.clientHeight;i>0&&(i=-1),q(n,!0);var o={touch:e,target:n,initialValue:0,property:"translateY",min:i,max:0,change:function(t){},animationEnd:function(e){t.props.scrollEnd&&t.props.scrollEnd(e);var n=Math.abs;n(t.alloyTouch.min)-(t.props.min||10)<n(e)&&t.props.onReachBottom&&t.props.onReachBottom(e)},touchEnd:function(t,e){}};t.alloyTouch=new U.a(o)},this.props.delay||20)}},{key:"componentWillReceiveProps",value:function(t,e){this.refresh()}},{key:"render",value:function(t,e,n){return R.h("div",{className:"scroller",style:"height: 100%;"},R.h("div",{className:"scroll-slider"},this.props.children))}}]),e}(),G=(n(3),Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}),K=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function Q(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function tt(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var et={getItem:function(t){try{return JSON.parse(sessionStorage.getItem(t))}catch(e){return sessionStorage.getItem(t)}},setItem:function(t,e){try{sessionStorage.setItem(t,JSON.stringify(e))}catch(n){sessionStorage.setItem(t,e.toString())}}};function nt(t){var e=t.store,n=t.isPick?" picked ":"";return R.h("div",{className:"store-card"+n},R.h("div",{className:"top"},R.h("p",{className:"name"},e.name||"佚名"),R.h("p",{className:"mobile"},e.mobile||"--"),R.h("p",{className:"distance"},e.distance||"未知")),R.h("div",{className:"down"},R.h("div",{className:"icon"}),R.h("p",{className:"address"},e.address||"暂无详细地址")))}!function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=tt(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));if(n.state={pageIndex:1,keywords:"",pickedStore:null,onLoading:!1,isMore:!0,list:[]},n.pickItem=function(t){n.props.resolve({success:!0,data:t}),n._action.close()},n.close=function(){n._action.close()},n.actionCancel=function(){n.props.resolve({success:!1,message:"user cancel !"})},n.onReachBottom=function(t){console.log("onReachBottom",t),n.state.isMore&&!n.state.onLoading&&(console.log(n.state.pageIndex),n.setState({pageIndex:n.state.pageIndex+1}),n.getList())},t.cache){console.log("cache");var i=et.getItem("StoreAction_cache_data");if(i)return console.log(i),n.setState(i),tt(n)}return n.getList(),n}(function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)})(e,I),K(e,[{key:"getList",value:function(){var t=this;if(!this.state.onLoading&&this.state.isMore){console.log("get list"),this.setState({onLoading:!0});var e=this.state.pageIndex,n={keywords:this.state.keywords,pageIndex:this.state.pageIndex,pageSize:this.props.pageSize||10};this.props.getList&&this.props.getList(n,function(i){var o=1===e?i:[].concat(Q(t.state.list),Q(i));t.setState({list:o,onLoading:!1,isMore:i.length===n.pageSize})})}}},{key:"search",value:function(t){this._input.value!==this.state.keywords&&(this.setState({keywords:this._input.value,pageIndex:1,onLoading:!1,isMore:!0}),this.getList())}},{key:"componentDidMount",value:function(){var t=this;this.setState({pickedStore:G({},this.props.value||{})}),setTimeout(function(){t._action.show()},20)}},{key:"componentWillUnmount",value:function(){et.setItem("StoreAction_cache_data",this.state)}},{key:"render",value:function(t,e,n){var i=this;return R.h(L,{className:"store-action",ref:function(t){return i._action=t},onCancel:this.actionCancel,position:"bottom",stop:!0},R.h("div",{className:"store-body"},R.h("header",null,R.h("p",null,"搜索门店"),R.h("div",{className:"search"},R.h("input",{type:"text",ref:function(t){return i._input=t}}),R.h("button",{onClick:this.search.bind(this)},"搜索"))),R.h("section",null,R.h(J,{delay:520,data:this.state.list,onReachBottom:this.onReachBottom},R.h("ul",{className:"store-list"},this.state.list.map(function(t){return R.h("li",{className:"store-item",onClick:i.pickItem.bind(i,t),key:t.key},R.h(nt,{store:t,isPick:t.key===i.state.pickedStore.key}))}))))))}}])}();var it=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ot=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function rt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var st={},at=function(){function t(){rt(this,t),this.task={}}return ot(t,[{key:"on",value:function(t,e){this.task[t]=e}},{key:"fire",value:function(t,e){this.task[t]&&this.task[t](e)}}]),t}(),ct=function(t){function e(t){rt(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.pickStore=function(){},n.$options=it({},st,t),t.el&&t.el instanceof Element&&n.insertDom(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,at),ot(e,[{key:"show",value:function(){}},{key:"hide",value:function(){}}]),e}();e.default=ct}]).default});